<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Biproportional apportionment — biproporz • proporz</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Biproportional apportionment — biproporz"><meta property="og:description" content="Method to proportionally allocate seats among parties (or lists) and districts (or
entities, regions), thus bi-proportional."><meta property="og:image" content="/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">proporz</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.5.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/apportionment_scenarios.html">Apportionment scenarios</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/polettif/proporz/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Biproportional apportionment</h1>
    <small class="dont-index">Source: <a href="https://github.com/polettif/proporz/blob/HEAD/R/biproportional.R" class="external-link"><code>R/biproportional.R</code></a></small>
    <div class="hidden name"><code>biproporz.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Method to proportionally allocate seats among parties (or lists) and districts (or
entities, regions), thus bi-proportional.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">biproporz</span><span class="op">(</span></span>
<span>  <span class="va">votes_matrix</span>,</span>
<span>  <span class="va">district_seats</span>,</span>
<span>  <span class="va">quorum</span>,</span>
<span>  use_list_votes <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"round"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>votes_matrix</dt>
<dd><p>Vote count matrix with votes by party in rows and votes by district
in columns</p></dd>


<dt>district_seats</dt>
<dd><p>Vector defining the number of seats per district. Must be the same
length as <code>ncol(votes_matrix)</code>. Values are name-matched to <code>votes_matrix</code> if both are
named. If the number of seats per district should be assigned according to the number
of votes (not the general use case), a single number for the total number of seats can
be used.</p></dd>


<dt>quorum</dt>
<dd><p>Optional list of functions which take the votes_matrix and return a logical
vector that denotes for each list/party whether they reached the quorum (i.e. are
eligible for seats). The easiest way to do this is via <code><a href="quorum_functions.html">quorum_any()</a></code> or
<code><a href="quorum_functions.html">quorum_all()</a></code>, see examples. Alternatively you can pass a precalculated logical
vector. No quorum is applied if parameter is missing or <code>NULL</code>.</p></dd>


<dt>use_list_votes</dt>
<dd><p>By default (<code>TRUE</code>) it's assumed that each voter in a district has
as many votes as there are seats in a district. Thus, votes are weighted according to
the number of available district seats with <code><a href="weight_list_votes.html">weight_list_votes()</a></code>. Set to <code>FALSE</code> if
<code>votes_matrix</code> shows the number of voters (e.g. they can only cast one vote for one
party).</p></dd>


<dt>method</dt>
<dd><p>Defines which method is used to assign seats. The following methods are
recommended:</p><ul><li><p><code>round</code>: Uses the Sainte-Laguë/Webster method (rounding half up) for the upper
and lower apportionment which is the standard for biproportional apportionment and
the only method guaranteed to terminate.</p></li>
<li><p><code>wto</code>: "winner take one" works like "round" with a condition that the party that
got the most votes in a district must get <em>at least</em> one seat ('Majorzbedingung')
in said district. Seats in the upper apportionment are assigned with
Sainte-Laguë/Webster. <code>votes_matrix</code> must have row and column names to use this
method. See <code><a href="lower_apportionment.html">lower_apportionment()</a></code> for more details.</p></li>
</ul><p>It is also possible to use any divisor method name listed in <code><a href="proporz.html">proporz()</a></code>. If you want to
use a different method for the upper and lower apportionment, provide a list with two
entries.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>Matrix with the same dimension as <code>votes_matrix</code> containing the number of seats
with the row and column divisors stored in attributes (hidden from print, see
<code><a href="get_divisors.html">get_divisors()</a></code>).</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>Each party nominates a candidate list for every district. The voters vote for
the parties of their district. The seat allocation is calculated in two steps:</p><ol><li><p>In the so called <code><a href="upper_apportionment.html">upper apportionment</a></code>
the number of seats for each party (over all districts) is determined.
Normally, the number of seats for each region are defined before the
election and are independent of the vote counts.</p></li>
<li><p>In the so called <code><a href="lower_apportionment.html">lower apportionment</a></code>
the seats are distributed to the regional party list respecting the
results from the upper apportionment.</p></li>
</ol><p>Parties failing to reach quorums cannot get seats. This function does not handle seat
assignment to candidates.</p>
    </div>
    <div id="note">
    <h2>Note</h2>
    <p>The iterative process in the lower apportionment is only guaranteed to terminate
with the default Sainte-Laguë/Webster method.</p>
    </div>
    <div id="references">
    <h2>References</h2>
    <p>Gaffke, Norbert; Pukelsheim, Friedrich (2008): Divisor methods for
proportional representation systems: An optimization approach to vector and matrix
apportionment problems. Mathematical Social Sciences, 56 (2), 166-184.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="pukelsheim.html">pukelsheim()</a></code> for biproportional apportionment with <code>data.frames</code> as inputs.</p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">votes_matrix</span> <span class="op">=</span> <span class="va">uri2020</span><span class="op">$</span><span class="va">votes_matrix</span></span></span>
<span class="r-in"><span><span class="va">district_seats</span> <span class="op">=</span> <span class="va">uri2020</span><span class="op">$</span><span class="va">seats_vector</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">biproporz</span><span class="op">(</span><span class="va">votes_matrix</span>, <span class="va">district_seats</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      Altdorf Bürglen Erstfeld Schattdorf</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> CVP        5       2        2          3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> SPGB       4       1        2          2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> FDP        3       1        1          2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> SVP        3       3        1          2</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># apply quorum (high values for illustrative purposes)</span></span></span>
<span class="r-in"><span><span class="fu">biproporz</span><span class="op">(</span><span class="va">votes_matrix</span>, <span class="va">district_seats</span>,</span></span>
<span class="r-in"><span>          <span class="fu"><a href="quorum_functions.html">quorum_all</a></span><span class="op">(</span>any_district <span class="op">=</span> <span class="fl">0.1</span>, total <span class="op">=</span> <span class="fl">0.25</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      Altdorf Bürglen Erstfeld Schattdorf</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> CVP        7       5        3          6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> SPGB       8       2        3          3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> FDP        0       0        0          0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> SVP        0       0        0          0</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Flavio Poletti.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

